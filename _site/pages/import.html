
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Working with Data in Python</title>
    
    <meta name="author" content="Stephanie Hicks">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
    
      <!-- knitr javascript -->
    <script src="/assets/themes/twitter/knitr.js" type="text/javascript"></script>

    <!-- mathjax javascript -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
    </script>
    <script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>


  </head>

  <body>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">Learn Python</a>
          <ul class="nav">
            
            
            


  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        
<div class="page-header">
  <h1>Working with Data in Python </h1>
</div>

<div class="row-fluid">
  <div class="span12">
    
<p>To read or write to a file in the current working directory, you use the function <code>open()</code> to “open” the file. </p>

<blockquote>
  <pre><code>fin = open('myfile.txt')
</code></pre>
</blockquote>

<p>With the mode <code>w</code> as a second parameters, you can write to the file. </p>

<blockquote>
  <pre><code>fout = open('myoutput.txt', 'w')
</code></pre>
</blockquote>

<p><strong>Note</strong>: If the file already exists, using <code>open()</code> will clear out everything in the file before writing to it. If the file doesn’t exist, the function will create a new file. </p>

<h1 id="reading-and-writing-files">Reading and writing files</h1>

<p>As you have seen, everything is an object in Python.  When you define files such as <code>fin</code> and <code>fout</code> above, these are file objects have an associated set of methods.  </p>

<h2 id="reading-files">Reading files</h2>

<blockquote>
  <pre><code>fin = open('myfile.txt')
fin
</code></pre>
</blockquote>

<h4 id="read-in-files-one-line-at-a-time">Read in files one line at a time</h4>
<p>If you want to read in a file one line at a time, use the methods function <code>readline()</code>.  The syntax is the name of the file, dot (or period) and <code>readline()</code>. It will read in the characters from a file until it reaches a new line and returns the result as a string. To read in the next line, run the line again. </p>

<blockquote>
  <pre><code>fin = open('myfile.txt')
fin.readline()
</code></pre>
</blockquote>

<h4 id="current-line-position-in-file">Current line position in file</h4>
<p>The method <code>tell()</code> reports the current position of the open file.  When you open a file, the current position is the beginning of the file (position 0). </p>

<blockquote>
  <pre><code>fin.tell()
</code></pre>
</blockquote>

<h4 id="read-in-file-at-a-specific-position">Read in file at a specific position</h4>
<p>To start reading the file at a different position than the current position, use the <code>seek()</code> method. The second argument describes how to interpret the first argument (number of bytes) .  </p>

<table>
  <thead>
    <tr>
      <th>Position</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>0</code></td>
      <td>move to absolute position (from start of file)</td>
    </tr>
    <tr>
      <td><code>1</code></td>
      <td>move to a relative position (from current position)</td>
    </tr>
    <tr>
      <td><code>2</code></td>
      <td>move to a position relative to the end of the file.</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <pre><code>fin.seek(5, 0)
</code></pre>
</blockquote>

<p>If you want read in each line of a file and print each line to the screen, you can use a <code>for</code> loop: </p>

<blockquote>
  <pre><code>fin = open('myfile.txt')
for line in fin: 
    word = line.strip()
    print word
</code></pre>
</blockquote>

<h4 id="keyboard-input">Keyboard input</h4>
<p>To accept input from the keyboard, use the keyword <code>raw_input</code> (in Python 2) or <code>input</code> (in Python 3).</p>

<blockquote>
  <pre><code>raw_input("How tall are you?")
</code></pre>
</blockquote>

<h2 id="writing-to-files">Writing to files</h2>
<p>To write to a file in Python, the argument must be a string.  If the argument is not a string, use the function <code>str()</code> to convert the argument to a string. </p>

<p>The methods functions <code>write()</code> and <code>close()</code> will write data to a file and close the file when finished writing to it.  The syntax is the name of the file, a dot (or period), and the function <code>write()</code>.  </p>

<blockquote>
  <pre><code>fin.close()
fin.closed
</code></pre>
</blockquote>

<p>The method <code>closed</code> will test if the file has been closed returning a True or False. </p>

<h4 id="writing-to-files-one-line-at-a-time">Writing to files one line at a time</h4>
<p>To write to a file one line at a time, just recall <code>write</code> again and again. </p>

<blockquote>
  <pre><code>fout.write("This is my first line.")
fout.write("This is my second line.")
fout.close()
</code></pre>
</blockquote>

<p>The last line tell Python you are done writing to the file, so it knows to close the file. Once a file has been closed</p>

<h2 id="with-and-as">with and as</h2>
<p>There is a short cut to opening and closing files using the <code>with</code> and <code>as</code> keywords.  The syntax is</p>

<blockquote>
  <pre><code>with open("file.txt", "w") as textfile:
    textfile.write("Success!")
    # Read or write to the file
</code></pre>
</blockquote>

<h1 id="paths-and-directories">Paths and directories</h1>
<p>To print the current working directory, use the function <code>getcwd()</code> from the module <code>os</code>. </p>

<blockquote>
  <pre><code>import os
cwd = os.getcwd()
print cwd
</code></pre>
</blockquote>

<p>To find the absolute path to a file use <code>path.abspath()</code>: </p>

<blockquote>
  <pre><code>os.path.abspath('myfile.text')
</code></pre>
</blockquote>

<p>To check if a file exists, use <code>path.exists()</code>:</p>

<blockquote>
  <pre><code>os.path.exists('myfile.text')
</code></pre>
</blockquote>

<p>To <strong>split</strong> the file and return a tuple containing the path and file name, use <code>path.split()</code>. To split the file and return a tuple containing the file name and the file extension, use <code>path.splitext()</code>. </p>

<blockquote>
  <pre><code>(pathdir, nameofile) = os.path.split('~/pathtofile/myfile.txt')
(nameofile, extension) = os.path.splitext('myfile.text')
</code></pre>
</blockquote>

<p>To <strong>join</strong> a path and the name of a file, use <code>path.join()</code></p>

<blockquote>
  <pre><code>os.path.join("nameofnewpath", "myfile.txt")
</code></pre>
</blockquote>

<p>To check if the argument is a file or a directory, use <code>path.isfile()</code> and <code>path.isdir()</code>: </p>

<blockquote>
  <pre><code>os.path.isdir('myfile.text')
os.path.isfile('myfile.text')
</code></pre>
</blockquote>

<p>To list the files in a directory use <code>path.listdir()</code>: </p>

<blockquote>
  <pre><code>os.path.listdir(cwd)
</code></pre>
</blockquote>

<p>To loop through the files in a directory, combine a <code>for</code> loop with <code>os.listdir()</code>: </p>

<blockquote>
  <pre><code>[os.path.join("~/nameofnewpath", elem) for elem in os.listdir(cwd)]
</code></pre>
</blockquote>

<h2 id="errors">Errors</h2>
<ul>
  <li>If a module doesn’t exist and you try to import it, Python will raise an <code>ImportError</code> exception. </li>
  <li>If a file doesn’t exist, if you don’t have permission to access a file or if you try to open a directory to read in, you will get an <code>IOError</code> exception. 
    <ul>
      <li>Tip: use functions like <code>os.path.exists()</code> and <code>os.path.isfile()</code> to test before reading in a file</li>
      <li>Tip: use the <code>try</code> and <code>except</code> statements (similar to an <code>if</code> statement). </li>
    </ul>
  </li>
</ul>

<blockquote>
  <pre><code>try:
    fin = open('myfile.txt')
except IOError:
    print "This file does not exist."
print "File opened."
</code></pre>
</blockquote>

<p>The line <code>except IOError</code> catches when the file does not exist and executes your own code. </p>

<h4 id="the-glob-module-and-listing-files-in-directories">The glob module and listing files in directories</h4>
<p>The glob module is useful when listing directories, but you do not have the name of the files (just a wildcard e.g. *.txt).  The <code>glob()</code> function will match all the *.txt files in a directory and return the them as a list</p>

<blockquote>
  <pre><code>import glob
glob.glob('*.txt')
</code></pre>
</blockquote>

<h1 id="databases">Databases</h1>
<p>A <em>database</em> is a specific type of file with a purpose of storing data.  For example, if you have created a dictionary with <em>keys</em> and <em>values</em>, you can create and update the dictionary database file.  To work with databases, import the Python module <code>anydbm</code>. </p>

<p>To open a database (and create it if it doesn’t already exist): </p>

<blockquote>
  <pre><code>import anydbm
db = anydbm.open('mydatabase.db', 'c')
</code></pre>
</blockquote>

<p>where the ‘c’ means to create the database if it doesn’t exist.  While interfacing with the database, if you add a key-value pair (i.e. item), then the module <code>anydbm</code> will update the database file.  After you are finished with the database, close it with the methods function <code>close()</code>. </p>

<blockquote>
  <pre><code>db.close()
</code></pre>
</blockquote>

<h4 id="pickling-a-database">Pickling a database</h4>
<p>The module <code>anydbm</code> ONLY works with databases that have keys and values as strings. If your keys or values are not strings, you can use the <code>pickle</code> module to translate any object into a string which can be then stored in a database.  When you want to access the database, the module will translate the string back into the original objects.  </p>

<blockquote>
  <pre><code>import pickle
</code></pre>
</blockquote>

<p>The methods function <code>pickle.dumps()</code> takes in any object and returns the string representation and <code>pickle.loads()</code> will translate the string object back to the original representation: </p>

<blockquote>
  <pre><code>x = tuple('yolo')
xstring = pickle.dumps(x)
xoriginal = pickle.loads(xstring)
print xoriginal 
</code></pre>
</blockquote>

<p><strong>Note</strong>: pickling and unpickling the object is the same copying the object. It will have the same value, but it not the same object.  </p>

<h4 id="shelve-module">Shelve module</h4>
<p>The <a href="http://python.wikia.com/wiki/Shelve">module</a> <code>shelve</code> has combined the function in the <code>anydbm</code> and <code>pickle</code> modules into one easy set of functions to use to interact with databases. </p>

<blockquote>
  <pre><code>import shelve
shelve.open('mydatabase.db')
</code></pre>
</blockquote>

<p>To interact with this database, use the <code>shelve()</code> function</p>

<blockquote>
  <pre><code>newVar = shelve['mykey']
shelve['mykey'] = newVar
shelve.close('mydatabase.db')
</code></pre>
</blockquote>


  </div>
</div>


      </div>
      <hr>
      <footer>
        <p>&copy; 2014 Stephanie Hicks
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    
  </body>
</html>

